<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RippleVMS Knowledge Graph</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js"></script>
    <script>
        mermaid.initialize({
            startOnLoad: false,
            theme: 'dark',
            themeVariables: {
                primaryColor: '#3b82f6',
                primaryTextColor: '#f1f5f9',
                primaryBorderColor: '#475569',
                lineColor: '#64748b',
                secondaryColor: '#7c3aed',
                tertiaryColor: '#1e293b',
                background: '#0f172a',
                mainBkg: '#1e293b',
                nodeBorder: '#475569',
                clusterBkg: '#1e293b',
                clusterBorder: '#475569',
                titleColor: '#f1f5f9',
                edgeLabelBackground: '#1e293b'
            },
            flowchart: { curve: 'basis', padding: 20 },
            er: { layoutDirection: 'TB' },
            sequence: { diagramMarginX: 50, diagramMarginY: 10, actorMargin: 50, width: 150, height: 65, boxMargin: 10, useMaxWidth: true }
        });
    </script>
    <style>
        :root {
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #94a3b8;
            --accent-blue: #3b82f6;
            --accent-green: #22c55e;
            --accent-purple: #a855f7;
            --accent-orange: #f97316;
            --accent-cyan: #06b6d4;
            --accent-red: #ef4444;
            --border-color: #475569;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg-primary); color: var(--text-primary); line-height: 1.6; }
        .container { max-width: 1400px; margin: 0 auto; padding: 2rem; }
        header { text-align: center; margin-bottom: 3rem; padding: 2rem; background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%); border-radius: 16px; border: 1px solid var(--border-color); }
        header h1 { font-size: 2.5rem; margin-bottom: 0.5rem; background: linear-gradient(135deg, var(--accent-blue), var(--accent-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        header p { color: var(--text-secondary); font-size: 1.1rem; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 1rem; margin-top: 1.5rem; }
        .stat-card { background: var(--bg-primary); padding: 1rem; border-radius: 8px; text-align: center; border: 1px solid var(--border-color); }
        .stat-value { font-size: 1.8rem; font-weight: bold; color: var(--accent-cyan); }
        .stat-label { font-size: 0.85rem; color: var(--text-secondary); }
        .nav-tabs { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 2rem; padding: 1rem; background: var(--bg-secondary); border-radius: 12px; border: 1px solid var(--border-color); }
        .nav-tab { padding: 0.75rem 1.5rem; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 8px; color: var(--text-secondary); cursor: pointer; transition: all 0.2s; font-size: 0.9rem; }
        .nav-tab:hover { background: var(--bg-primary); color: var(--text-primary); }
        .nav-tab.active { background: var(--accent-blue); color: white; border-color: var(--accent-blue); }
        .section { display: none; animation: fadeIn 0.3s ease; }
        .section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .card { background: var(--bg-secondary); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem; border: 1px solid var(--border-color); }
        .card h2 { color: var(--accent-blue); margin-bottom: 1rem; font-size: 1.5rem; }
        .mermaid { background: var(--bg-primary); border-radius: 8px; padding: 1rem; margin: 1rem 0; overflow-x: auto; }
        .perm-table { width: 100%; border-collapse: collapse; font-size: 0.85rem; margin-top: 1rem; }
        .perm-table th, .perm-table td { padding: 0.75rem; border: 1px solid var(--border-color); text-align: center; }
        .perm-table th { background: var(--bg-tertiary); }
        .perm-table td:first-child { text-align: left; font-weight: 500; }
        .perm-yes { color: var(--accent-green); font-weight: bold; }
        .perm-no { color: var(--text-secondary); }
        .api-route { display: flex; align-items: center; gap: 0.75rem; padding: 0.5rem 0.75rem; background: var(--bg-primary); border-radius: 6px; margin-bottom: 0.5rem; font-family: 'Monaco', 'Menlo', monospace; font-size: 0.85rem; }
        .api-method { padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.7rem; font-weight: 600; min-width: 50px; text-align: center; }
        .api-method.get { background: var(--accent-green); color: white; }
        .api-method.post { background: var(--accent-blue); color: white; }
        .api-method.put { background: var(--accent-orange); color: white; }
        .api-method.delete { background: var(--accent-red); color: white; }
        .api-path { color: var(--text-primary); }
        .api-desc { color: var(--text-secondary); margin-left: auto; font-family: inherit; }
        .api-group { margin-bottom: 1.5rem; }
        .api-group-title { color: var(--accent-blue); font-size: 1rem; margin-bottom: 0.75rem; padding-left: 0.5rem; border-left: 3px solid var(--accent-blue); }
        .tech-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .tech-card { background: var(--bg-primary); padding: 1rem; border-radius: 8px; border: 1px solid var(--border-color); }
        .tech-name { font-weight: 600; color: var(--text-primary); }
        .tech-desc { font-size: 0.85rem; color: var(--text-secondary); margin-top: 0.25rem; }
        .role-admin { color: var(--accent-purple); }
        .role-coord { color: var(--accent-blue); }
        .role-dispatch { color: var(--accent-orange); }
        .role-volunteer { color: var(--accent-green); }
        footer { text-align: center; padding: 2rem; color: var(--text-secondary); font-size: 0.9rem; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>RippleVMS Knowledge Graph</h1>
            <p>Interactive visualization of system architecture and component relationships</p>
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-value">142</div><div class="stat-label">TypeScript Files</div></div>
                <div class="stat-card"><div class="stat-value">24</div><div class="stat-label">Database Models</div></div>
                <div class="stat-card"><div class="stat-value">48+</div><div class="stat-label">API Routes</div></div>
                <div class="stat-card"><div class="stat-value">25</div><div class="stat-label">Components</div></div>
                <div class="stat-card"><div class="stat-value">4</div><div class="stat-label">User Roles</div></div>
            </div>
        </header>

        <nav class="nav-tabs">
            <div class="nav-tab active" data-section="overview">Overview</div>
            <div class="nav-tab" data-section="database">Database</div>
            <div class="nav-tab" data-section="api">API Routes</div>
            <div class="nav-tab" data-section="workflows">Workflows</div>
            <div class="nav-tab" data-section="permissions">Permissions</div>
        </nav>

        <!-- Overview Section -->
        <section id="overview" class="section active">
            <div class="card">
                <h2>System Architecture</h2>
                <pre class="mermaid">
flowchart TB
    subgraph Client["Client Layer"]
        Dashboard
        Map
        Shifts
        Trainings
        Sightings
        Volunteers
        Schedule
        Resources
        Admin
    end
    subgraph Components["Component Layer"]
        Layout["Layout Components"]
        Maps["Map Components"]
        ScheduleComp["Schedule Components"]
        Onboarding["Onboarding Components"]
    end
    subgraph API["API Layer"]
        AuthAPI["/api/auth"]
        ShiftsAPI["/api/shifts"]
        TrainingsAPI["/api/trainings"]
        SightingsAPI["/api/sightings"]
        VolunteersAPI["/api/volunteers"]
        ScheduleAPI["/api/schedule"]
        AdminAPI["/api/admin"]
        ProfileAPI["/api/profile"]
    end
    subgraph Services["Service Layer"]
        DB["lib/db.ts"]
        User["lib/user.ts"]
        Auth["lib/auth.ts"]
        Email["lib/email.ts"]
        S3Lib["lib/s3.ts"]
        Features["lib/features.ts"]
    end
    subgraph External["External Services"]
        Neon[("Neon PostgreSQL")]
        SES["AWS SES"]
        S3["Amazon S3"]
        GMaps["Google Maps"]
        NextAuth["NextAuth.js"]
    end
    Client --> Components
    Components --> API
    API --> Services
    Services --> External
                </pre>
            </div>
            <div class="card">
                <h2>Tech Stack</h2>
                <div class="tech-grid">
                    <div class="tech-card"><div class="tech-name">Next.js 16</div><div class="tech-desc">App Router, Server Components</div></div>
                    <div class="tech-card"><div class="tech-name">Prisma ORM</div><div class="tech-desc">Database access & migrations</div></div>
                    <div class="tech-card"><div class="tech-name">Neon PostgreSQL</div><div class="tech-desc">Serverless database</div></div>
                    <div class="tech-card"><div class="tech-name">TypeScript</div><div class="tech-desc">Type-safe JavaScript</div></div>
                    <div class="tech-card"><div class="tech-name">Tailwind CSS</div><div class="tech-desc">Utility-first styling</div></div>
                    <div class="tech-card"><div class="tech-name">AWS SES + S3</div><div class="tech-desc">Email & media storage</div></div>
                </div>
            </div>
        </section>

        <!-- Database Section -->
        <section id="database" class="section">
            <div class="card">
                <h2>Core User & Organization</h2>
                <pre class="mermaid">
erDiagram
    User ||--o{ UserZone : has
    User ||--o{ UserQualification : has
    Zone ||--o{ UserZone : contains
    Zone ||--o{ PointOfInterest : has
    QualifiedRole ||--o{ UserQualification : grants
    POICategory ||--o{ PointOfInterest : categorizes
    User {
        string id PK
        string email UK
        string name
        enum role
        string phone
        boolean isActive
    }
    Zone {
        string id PK
        string name
        string code UK
        string color
        json boundaries
    }
    QualifiedRole {
        string id PK
        string name
        string slug UK
        string color
        boolean countsTowardMinimum
    }
                </pre>
            </div>
            <div class="card">
                <h2>Shift Management</h2>
                <pre class="mermaid">
erDiagram
    ShiftTypeConfig ||--o{ Shift : configures
    Zone ||--o{ Shift : hosts
    Shift ||--o{ ShiftVolunteer : has
    User ||--o{ ShiftVolunteer : participates
    ShiftTypeConfig {
        string id PK
        string name
        string slug UK
        string color
        int minVolunteers
        int maxVolunteers
    }
    Shift {
        string id PK
        string title
        datetime date
        datetime startTime
        datetime endTime
        enum status
    }
    ShiftVolunteer {
        string id PK
        string oderId FK
        string shiftId FK
        enum status
        boolean isZoneLead
    }
                </pre>
            </div>
            <div class="card">
                <h2>Training System</h2>
                <pre class="mermaid">
erDiagram
    TrainingType ||--o{ TrainingSession : creates
    TrainingSession ||--o{ TrainingSessionAttendee : has
    User ||--o{ TrainingSessionAttendee : attends
    TrainingType {
        string id PK
        string name
        int duration
        int capacity
    }
    TrainingSession {
        string id PK
        datetime date
        string location
        enum status
    }
    TrainingSessionAttendee {
        string id PK
        enum status
        datetime completedAt
    }
                </pre>
            </div>
            <div class="card">
                <h2>Incident Reporting</h2>
                <pre class="mermaid">
erDiagram
    IceSighting ||--o{ SightingMedia : has
    IceSighting {
        string id PK
        int size
        string activity
        string location
        float latitude
        float longitude
        enum status
    }
    SightingMedia {
        string id PK
        string url
        enum type
    }
                </pre>
            </div>
        </section>

        <!-- API Routes Section -->
        <section id="api" class="section">
            <div class="card">
                <h2>API Routes</h2>
                <div class="api-group">
                    <div class="api-group-title">Authentication</div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/auth/[...nextauth]</span><span class="api-desc">NextAuth handlers</span></div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/auth/session</span><span class="api-desc">Get current session</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/auth/forgot-password</span><span class="api-desc">Request password reset</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/auth/reset-password</span><span class="api-desc">Confirm password reset</span></div>
                </div>
                <div class="api-group">
                    <div class="api-group-title">Shifts</div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/shifts</span><span class="api-desc">List shifts</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/shifts</span><span class="api-desc">Create shift</span></div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/shifts/[id]</span><span class="api-desc">Get shift details</span></div>
                    <div class="api-route"><span class="api-method put">PUT</span><span class="api-path">/api/shifts/[id]</span><span class="api-desc">Update shift</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/shifts/[id]/rsvp</span><span class="api-desc">RSVP to shift</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/shifts/bulk-edit</span><span class="api-desc">Bulk edit shifts</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/shifts/cancel</span><span class="api-desc">Cancel shift</span></div>
                </div>
                <div class="api-group">
                    <div class="api-group-title">Trainings</div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/trainings</span><span class="api-desc">List training sessions</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/trainings</span><span class="api-desc">Create training</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/trainings/[id]/rsvp</span><span class="api-desc">RSVP to training</span></div>
                </div>
                <div class="api-group">
                    <div class="api-group-title">Volunteers</div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/volunteers</span><span class="api-desc">List volunteers</span></div>
                    <div class="api-route"><span class="api-method put">PUT</span><span class="api-path">/api/volunteers/[id]</span><span class="api-desc">Update volunteer</span></div>
                </div>
                <div class="api-group">
                    <div class="api-group-title">Sightings (Public)</div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/sightings</span><span class="api-desc">List ICE sightings</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/sightings</span><span class="api-desc">Report sighting (no auth)</span></div>
                </div>
                <div class="api-group">
                    <div class="api-group-title">Schedule</div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/schedule</span><span class="api-desc">Weekly schedule data with dispatchers, leads, backups</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/dispatcher-assignments</span><span class="api-desc">Create dispatcher assignment</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/regional-lead-assignments</span><span class="api-desc">Assign dispatch coordinator</span></div>
                </div>
                <div class="api-group">
                    <div class="api-group-title">Admin</div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/admin/zones</span><span class="api-desc">Zone management</span></div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/admin/shift-types</span><span class="api-desc">Shift type config</span></div>
                    <div class="api-route"><span class="api-method get">GET</span><span class="api-path">/api/admin/qualified-roles</span><span class="api-desc">Qualified roles</span></div>
                    <div class="api-route"><span class="api-method post">POST</span><span class="api-path">/api/admin/email-blast</span><span class="api-desc">Send email blast</span></div>
                </div>
            </div>
        </section>

        <!-- Workflows Section -->
        <section id="workflows" class="section">
            <div class="card">
                <h2>Authentication Flow</h2>
                <pre class="mermaid">
sequenceDiagram
    participant U as User
    participant L as Login Page
    participant NA as NextAuth
    participant DB as Database
    U->>L: Enter credentials
    L->>NA: Authenticate
    NA->>DB: Verify password
    DB-->>NA: User record
    NA-->>L: JWT Token
    L-->>U: Redirect to Dashboard
                </pre>
            </div>
            <div class="card">
                <h2>Shift Workflow</h2>
<pre class="mermaid">
graph TD
A["Coordinator Creates Shift"]
A --> B["Draft or Published"]
B --> C["Volunteers See Shift"]
C --> D["Volunteer RSVPs"]
D --> E["Pending / Confirmed / Declined"]
E --> F["Shift Day"]
F --> G["Check In"]
G --> H["Check Out"]
H --> I["COMPLETED"]
</pre>
            </div>
            <div class="card">
                <h2>Training & Qualification Flow</h2>
<pre class="mermaid">
graph TD
A["Admin Creates TrainingType"]
A --> B["Grants QualifiedRoles"]
C["Coordinator Schedules Session"]
C --> D["TrainingSession Created"]
D --> E["Email Invites Sent"]
D --> F["Volunteers RSVP"]
F --> G["Attendance Tracked"]
G --> H["Completed Status"]
H --> I["UserQualification Created"]
I --> J["Role Granted to User"]
</pre>
            </div>
            <div class="card">
                <h2>ICE Sighting Report Flow</h2>
<pre class="mermaid">
graph TD
A["Public User"]
A --> B["Report Page"]
B --> C["SALUTE Form"]
C --> D["POST to API"]
D --> E["IceSighting Created"]
D --> F["SightingMedia Uploaded"]
E --> G["Email Alert to Dispatchers"]
G --> H["Dispatcher Dashboard"]
H --> I["Status Updates"]
I --> J["REVIEWING / VERIFIED / RESPONDED"]
J --> K["CLOSED"]
</pre>
            </div>
            <div class="card">
                <h2>Dispatcher Scheduling Modes</h2>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">Three modes for varying activity levels - configured in Admin Settings</p>
<pre class="mermaid">
graph LR
    subgraph REGIONAL["ðŸŸ¢ REGIONAL (Low Activity)"]
        R1["One dispatcher"]
        R2["All counties"]
        R3["Per time block"]
        R1 --> R2 --> R3
    end
    subgraph COUNTY["ðŸŸ¡ COUNTY (Medium Activity)"]
        C1["One dispatcher"]
        C2["Per county"]
        C3["Per day"]
        C1 --> C2 --> C3
    end
    subgraph ZONE["ðŸ”´ ZONE (High Activity)"]
        Z1["Dispatcher shown"]
        Z2["Per cell"]
        Z3["With zone assignments"]
        Z1 --> Z2 --> Z3
    end
</pre>
                <div class="tech-grid" style="margin-top: 1rem;">
                    <div class="tech-card" style="border-left: 4px solid var(--accent-green);"><div class="tech-name">Regional Mode</div><div class="tech-desc">Dedicated dispatcher row between Dispatch Coordinator and counties</div></div>
                    <div class="tech-card" style="border-left: 4px solid var(--accent-orange);"><div class="tech-name">County Mode</div><div class="tech-desc">Dispatcher row under each county header</div></div>
                    <div class="tech-card" style="border-left: 4px solid var(--accent-red);"><div class="tech-name">Zone Mode</div><div class="tech-desc">Dispatcher inline with zone assignments (default)</div></div>
                </div>
            </div>
            <div class="card">
                <h2>Backup Dispatchers</h2>
                <p style="margin-bottom: 1rem; color: var(--text-secondary);">Region-wide backup dispatchers available to support any county</p>
<pre class="mermaid">
graph TD
    subgraph Schedule["Schedule View"]
        DC["Dispatch Coordinator"]
        BD["ðŸ”„ Backup Dispatchers"]
        CD["County Dispatchers"]
        ZL["Zone Leads"]
        DC --> BD
        BD --> CD
        CD --> ZL
    end
    subgraph BackupFeatures["Backup Dispatcher Features"]
        B1["Region-wide availability"]
        B2["Assigned per time block"]
        B3["Support any county"]
        B4["Orange highlighting"]
    end
    BD --- BackupFeatures
</pre>
                <div class="tech-grid" style="margin-top: 1rem;">
                    <div class="tech-card" style="border-left: 4px solid var(--accent-orange);"><div class="tech-name">Region-Wide</div><div class="tech-desc">Not tied to specific county - can support any area</div></div>
                    <div class="tech-card" style="border-left: 4px solid var(--accent-orange);"><div class="tech-name">Time Block Based</div><div class="tech-desc">Assigned to specific time blocks (6am-10am, 10am-2pm, 2pm-6pm)</div></div>
                    <div class="tech-card" style="border-left: 4px solid var(--accent-orange);"><div class="tech-name">Visual Display</div><div class="tech-desc">Orange "Backup Disp." row in schedule view</div></div>
                </div>
            </div>
        </section>

        <!-- Permissions Section -->
        <section id="permissions" class="section">
            <div class="card">
                <h2>User Roles</h2>
                <div class="tech-grid">
                    <div class="tech-card" style="border-left: 4px solid var(--accent-purple);"><div class="tech-name role-admin">ADMINISTRATOR</div><div class="tech-desc">Full system access, user management, settings</div></div>
                    <div class="tech-card" style="border-left: 4px solid var(--accent-blue);"><div class="tech-name role-coord">COORDINATOR</div><div class="tech-desc">Manage shifts, volunteers, trainings</div></div>
                    <div class="tech-card" style="border-left: 4px solid var(--accent-orange);"><div class="tech-name role-dispatch">DISPATCHER</div><div class="tech-desc">Full coordinator access plus real-time coordination</div></div>
                    <div class="tech-card" style="border-left: 4px solid var(--accent-green);"><div class="tech-name role-volunteer">VOLUNTEER</div><div class="tech-desc">View/RSVP shifts, update profile</div></div>
                </div>
            </div>
            <div class="card">
                <h2>Permission Matrix</h2>
                <table class="perm-table">
                    <thead>
                        <tr><th>Feature / Action</th><th class="role-volunteer">Volunteer</th><th class="role-dispatch">Dispatcher</th><th class="role-coord">Coordinator</th><th class="role-admin">Admin</th></tr>
                    </thead>
                    <tbody>
                        <tr><td>View Dashboard</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>View Shifts</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>RSVP to Shifts</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Create Shifts</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Edit Shifts</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Bulk Edit Shifts</td><td class="perm-no">-</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>View Trainings</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Create Trainings</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>View Volunteer Roster</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Edit Volunteers</td><td class="perm-no">-</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>View Sightings</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Manage Sightings</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Admin Settings</td><td class="perm-no">-</td><td class="perm-no">-</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Zone Management</td><td class="perm-no">-</td><td class="perm-no">-</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td></tr>
                        <tr><td>Email Blasts</td><td class="perm-no">-</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td><td class="perm-yes">&#10003;</td></tr>
                    </tbody>
                </table>
            </div>
            <div class="card">
                <h2>Qualified Roles (Shift Positions)</h2>
                <div class="tech-grid">
                    <div class="tech-card"><div class="tech-name" style="color: #3b82f6;">Zone Lead</div><div class="tech-desc">Leads volunteers in a zone during a shift</div></div>
                    <div class="tech-card"><div class="tech-name" style="color: #f97316;">Dispatcher</div><div class="tech-desc">Coordinates real-time during shifts</div></div>
                    <div class="tech-card"><div class="tech-name" style="color: #22c55e;">Verifier</div><div class="tech-desc">Verifies and confirms sightings</div></div>
                </div>
            </div>
        </section>

        <footer>
            <p>RippleVMS Knowledge Graph | Generated December 2025</p>
            <p style="font-size: 0.85rem; margin-top: 0.5rem;">Next.js 16 | Prisma ORM | PostgreSQL | TypeScript | Tailwind CSS</p>
        </footer>
    </div>

    <script>
        const tabs = document.querySelectorAll('.nav-tab');
        const sections = document.querySelectorAll('.section');

        const renderSection = (section) => {
            if (!section) return;
            const diagrams = section.querySelectorAll('.mermaid:not([data-processed="true"])');
            if (diagrams.length) {
                mermaid.init(undefined, diagrams);
            }
        };

        renderSection(document.querySelector('.section.active'));

        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                sections.forEach(s => s.classList.remove('active'));
                const targetSection = document.getElementById(tab.dataset.section);
                targetSection.classList.add('active');
                renderSection(targetSection);
            });
        });
    </script>
</body>
</html>
